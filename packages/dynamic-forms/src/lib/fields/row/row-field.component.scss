// Row-specific styling overrides and customizations
@use 'sass:math';
@use '../../styles/grid-system.scss';

:host {
  // Row flex container - items use natural size unless col is specified
  display: flex;
  flex-wrap: wrap;
  gap: var(--df-grid-gap);
  align-items: flex-start;
  width: 100%;

  // Fields without explicit col classes use their natural content size
  ::ng-deep > *:not([class*='df-col-']) {
    flex: 0 0 auto;
  }

  // Column span utilities for 12-column grid system (1-12)
  // Use ::ng-deep because child components have their own view encapsulation
  @for $i from 1 through 12 {
    ::ng-deep > .df-col-#{$i} {
      flex: 0 0 calc(#{math.percentage(math.div($i, 12))} - var(--df-grid-gap) * #{math.div((12 - $i), 12)});
      max-width: calc(#{math.percentage(math.div($i, 12))} - var(--df-grid-gap) * #{math.div((12 - $i), 12)});
    }
  }

  // Allow customization of gap for individual rows
  &.df-gap-custom {
    --df-grid-gap: var(--row-custom-gap, 1rem);
  }

  // Row-specific responsive overrides
  &.df-row-mobile-stack {
    @media (max-width: 576px) {
      flex-direction: column;

      ::ng-deep > * {
        flex: 0 0 100% !important;
        max-width: 100% !important;
      }
    }
  }

  &.df-row-tablet-2col {
    @media (min-width: 577px) and (max-width: 768px) {
      // Each item takes ~50% in tablet view
      ::ng-deep > * {
        flex: 0 0 calc(50% - var(--df-grid-gap) / 2);
        max-width: calc(50% - var(--df-grid-gap) / 2);
      }
    }
  }

  &.df-container-hidden {
    display: none;
  }
}

// Responsive behavior for rows
@media (max-width: 576px) {
  :host {
    // Force single column on mobile for better UX
    flex-direction: column;

    ::ng-deep > * {
      flex: 0 0 100% !important;
      max-width: 100% !important;
    }
  }

  // Mobile-specific overrides to keep side-by-side layout
  :host.df-row-mobile-keep-cols {
    flex-direction: row;

    // Items without col use natural size, items with col keep their grid sizing
    ::ng-deep > *:not([class*='df-col-']) {
      flex: 0 0 auto !important;
      max-width: none !important;
    }
  }
}

@media (min-width: 577px) and (max-width: 768px) {
  :host {
    // On tablet, items with col classes get adjusted sizing
    // Items without col classes use natural content size
  }
}
