// ============================================
// MATERIAL EXAMPLE APP STYLES
// ============================================
// Uses ng-forge styling library with ember-themed Material

@use '@angular/material' as mat;
@use 'material' as ember-mat;
@use 'examples' as examples;
@use 'tokens' as *;

// Initialize Material core
@include mat.core();

// ============================================
// THEME APPLICATION
// ============================================

// Apply ember-themed Material (light default)
@include ember-mat.material-theme-light();

// Auto mode - use system preference when no data-theme is set
@media (prefers-color-scheme: dark) {
  html:not([data-theme]),
  :root:not([data-theme]) {
    @include ember-mat.material-theme-dark();
  }
}

// Explicit light theme (same as default, for when data-theme='light' is set)
[data-theme='light'] {
  @include ember-mat.material-theme-light();
}

// Explicit dark theme
[data-theme='dark'] {
  @include ember-mat.material-theme-dark();
}

// Landing page theme (dark variant with landing background)
[data-theme='landing'] {
  @include ember-mat.material-theme-landing();
}

// ============================================
// EXAMPLE APP STYLES
// ============================================

@include examples.example-base();
@include examples.example-theme-variables();
@include examples.example-body-themes();
@include examples.example-components();

// Material-specific body font
body {
  font-family: $font-primary;
}

// ============================================
// MATERIAL INPUT TEXT COLOR OVERRIDE
// ============================================
// Material theme handles backgrounds - we only override text colors for contrast

// Light mode - white input backgrounds
.mat-mdc-form-field {
  --mdc-outlined-text-field-container-color: #ffffff;
  --mdc-filled-text-field-container-color: #ffffff;
}

// Direct override for outlined text field background
.mdc-text-field--outlined {
  background-color: #ffffff !important;
}

.mdc-text-field--filled {
  background-color: #ffffff !important;
}

// Auto mode - light text and black backgrounds when system prefers dark
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) .mat-mdc-form-field {
    --mat-form-field-outlined-input-text-color: #dee2e6;
    --mat-form-field-filled-input-text-color: #dee2e6;
    --mdc-outlined-text-field-container-color: #000000;
    --mdc-filled-text-field-container-color: #000000;
  }

  html:not([data-theme]) .mdc-text-field--outlined,
  html:not([data-theme]) .mdc-text-field--filled {
    background-color: #000000 !important;
  }
}

// Dark mode - light text and black backgrounds
[data-theme='dark'] .mat-mdc-form-field,
[data-theme='landing'] .mat-mdc-form-field {
  --mat-form-field-outlined-input-text-color: #dee2e6;
  --mat-form-field-filled-input-text-color: #dee2e6;
  --mdc-outlined-text-field-container-color: #000000;
  --mdc-filled-text-field-container-color: #000000;
}

[data-theme='dark'] .mdc-text-field--outlined,
[data-theme='dark'] .mdc-text-field--filled,
[data-theme='landing'] .mdc-text-field--outlined,
[data-theme='landing'] .mdc-text-field--filled {
  background-color: #000000 !important;
}

// ============================================
// MATERIAL DATEPICKER OVERRIDE
// ============================================
// Set datepicker backgrounds to white (light) and black (dark) for contrast

// Light mode - white datepicker background
.mat-datepicker-content {
  --mat-datepicker-calendar-container-background-color: #ffffff !important;
  --mat-datepicker-calendar-date-selected-state-background-color: #{$ember-core} !important;
  --mat-datepicker-calendar-date-today-selected-state-outline-color: #{$ember-core} !important;
}

// Datepicker toggle button - remove circle/background, use ember color for icon
.mat-datepicker-toggle {
  --mat-datepicker-toggle-icon-color: #{$ember-core};

  .mat-mdc-icon-button {
    --mdc-icon-button-state-layer-size: 40px;
    --mdc-icon-button-icon-size: 24px;

    // Remove the circle background
    &::before {
      display: none !important;
    }

    // Style the ripple to use ember color
    .mat-mdc-button-persistent-ripple::before {
      background-color: #{$ember-core} !important;
      opacity: 0 !important;
    }

    &:hover .mat-mdc-button-persistent-ripple::before {
      opacity: 0.04 !important;
    }
  }
}

// Auto mode - black datepicker when system prefers dark
@media (prefers-color-scheme: dark) {
  html:not([data-theme]) .mat-datepicker-content {
    --mat-datepicker-calendar-container-background-color: #000000 !important;
    --mat-datepicker-calendar-date-selected-state-background-color: #{$ember-glow} !important;
    --mat-datepicker-calendar-date-today-selected-state-outline-color: #{$ember-glow} !important;
  }

  html:not([data-theme]) .mat-datepicker-toggle {
    --mat-datepicker-toggle-icon-color: #{$ember-glow};
  }
}

// Dark mode - black datepicker background
[data-theme='dark'] .mat-datepicker-content,
[data-theme='landing'] .mat-datepicker-content {
  --mat-datepicker-calendar-container-background-color: #000000 !important;
  --mat-datepicker-calendar-date-selected-state-background-color: #{$ember-glow} !important;
  --mat-datepicker-calendar-date-today-selected-state-outline-color: #{$ember-glow} !important;
}

[data-theme='dark'] .mat-datepicker-toggle,
[data-theme='landing'] .mat-datepicker-toggle {
  --mat-datepicker-toggle-icon-color: #{$ember-glow};
}
