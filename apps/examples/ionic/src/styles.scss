@import '@ionic/angular/css/core.css';
@import '@ionic/angular/css/normalize.css';
@import '@ionic/angular/css/structure.css';
@import '@ionic/angular/css/typography.css';
@import '@ionic/angular/css/display.css';

/* Optional Ionic CSS utilities */
@import '@ionic/angular/css/padding.css';
@import '@ionic/angular/css/float-elements.css';
@import '@ionic/angular/css/text-alignment.css';
@import '@ionic/angular/css/text-transformation.css';
@import '@ionic/angular/css/flex-utils.css';

/* We handle dark/light mode ourselves to match ng-doc theme */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  // Use auto height for iframe embedding - content determines height
  height: auto;
  min-height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Roboto', sans-serif;
  overflow: auto !important;
  // ng-doc light mode colors
  background-color: #f6f6f6;
  color: rgb(78, 78, 78);
}

// Override Ionic's fixed positioning for iframe embedding
// This allows content to flow naturally and body to report correct height
ion-app {
  position: relative !important;
  height: auto !important;
  min-height: 100%;
}

ion-router-outlet {
  position: relative !important;
  height: auto !important;
  display: block !important;
  contain: none !important;

  // Override .ion-page styles for iframe embedding
  .ion-page,
  .ion-page.ion-page-invisible,
  .ion-page.ion-page-hidden {
    position: relative !important;
    height: auto !important;
    min-height: auto !important;
    contain: none !important;
    display: block !important;
  }
}

// Additional .ion-page override with high specificity
.ion-page.ion-page,
ion-router-outlet > .ion-page {
  position: relative !important;
  height: auto !important;
  min-height: auto !important;
  contain: none !important;
  display: block !important;
}

ion-content {
  position: relative !important;
  height: auto !important;
  contain: none !important;

  &::part(scroll) {
    position: relative !important;
    overflow: visible !important;
  }
}

// ng-doc light mode - Ionic CSS variables (must come after Ionic imports)
:root {
  // Page background uses ng-doc color
  --ion-background-color: #f6f6f6;
  --ion-background-color-rgb: 246, 246, 246;
  // Text color
  --ion-text-color: rgb(78, 78, 78);
  --ion-text-color-rgb: 78, 78, 78;
  // Keep inputs/items white for contrast
  --ion-item-background: #ffffff;
  --ion-card-background: #ffffff;
}

// Auto mode - use system preference when no data-theme is set
@media (prefers-color-scheme: dark) {
  html:not([data-theme]),
  html:not([data-theme]) body {
    // ng-doc dark mode colors
    background-color: rgb(41, 41, 41);
    color: #a9a9a9;
  }

  // ng-doc dark mode - Ionic CSS variables (auto)
  :root:not([data-theme]) {
    --ion-background-color: rgb(41, 41, 41);
    --ion-background-color-rgb: 41, 41, 41;
    --ion-text-color: #a9a9a9;
    --ion-text-color-rgb: 169, 169, 169;
    // Inputs/items use slightly lighter background for contrast
    --ion-item-background: rgb(55, 55, 55);
    --ion-card-background: rgb(55, 55, 55);
    // Input-specific colors
    --ion-input-background: rgb(55, 55, 55);
    --ion-color-step-50: rgb(50, 50, 50);
    --ion-color-step-100: rgb(60, 60, 60);
    --ion-color-step-150: rgb(70, 70, 70);
    --ion-toolbar-background: rgb(41, 41, 41);
  }

  // Auto dark mode input styling
  html:not([data-theme]) {
    ion-input,
    ion-textarea,
    ion-select {
      --background: rgb(55, 55, 55);
      --color: #a9a9a9;
      --placeholder-color: rgb(140, 140, 140);
    }

    ion-item {
      --background: rgb(55, 55, 55);
      --color: #a9a9a9;
      --border-color: rgb(71, 71, 71);
    }
  }
}

// Explicit dark theme
html[data-theme='dark'],
html[data-theme='dark'] body {
  // ng-doc dark mode colors
  background-color: rgb(41, 41, 41);
  color: #a9a9a9;
}

// ng-doc dark mode - Ionic CSS variables (explicit)
html[data-theme='dark'] {
  --ion-background-color: rgb(41, 41, 41);
  --ion-background-color-rgb: 41, 41, 41;
  --ion-text-color: #a9a9a9;
  --ion-text-color-rgb: 169, 169, 169;
  // Inputs/items use slightly lighter background for contrast
  --ion-item-background: rgb(55, 55, 55);
  --ion-card-background: rgb(55, 55, 55);
  // Input-specific colors
  --ion-input-background: rgb(55, 55, 55);
  --ion-color-step-50: rgb(50, 50, 50);
  --ion-color-step-100: rgb(60, 60, 60);
  --ion-color-step-150: rgb(70, 70, 70);
  --ion-toolbar-background: rgb(41, 41, 41);
}

// Dark mode input styling
html[data-theme='dark'] {
  ion-input,
  ion-textarea,
  ion-select {
    --background: rgb(55, 55, 55);
    --color: #a9a9a9;
    --placeholder-color: rgb(140, 140, 140);
  }

  ion-item {
    --background: rgb(55, 55, 55);
    --color: #a9a9a9;
    --border-color: rgb(71, 71, 71);
  }
}

// Ionic-specific: ion-content needs padding since it's a scrollable container
ion-content {
  --padding-start: 24px;
  --padding-end: 24px;
  --padding-top: 24px;
  --padding-bottom: 24px;
  // ng-doc light mode background
  --background: #f6f6f6;
}

// Auto mode - ion-content dark background
@media (prefers-color-scheme: dark) {
  ion-content:not([data-theme]) {
    --background: rgb(41, 41, 41);
  }
}

// Explicit dark theme - ion-content
html[data-theme='dark'] ion-content {
  --background: rgb(41, 41, 41);
}

// ============================================
// Shared Example App Styles
// ============================================

:root {
  // ng-doc light mode colors
  --example-result-bg: #ebebeb;
  --example-result-border: #ddd;
  --example-result-text: rgb(78, 78, 78);
}

// Auto mode - use system preference when no data-theme is set
@media (prefers-color-scheme: dark) {
  html:not([data-theme]),
  :root:not([data-theme]) {
    // ng-doc dark mode colors
    --example-result-bg: rgb(48, 48, 48);
    --example-result-border: rgb(71, 71, 71);
    --example-result-text: #a9a9a9;
  }
}

// Explicit dark theme
html[data-theme='dark'],
:root[data-theme='dark'] {
  // ng-doc dark mode colors
  --example-result-bg: rgb(48, 48, 48);
  --example-result-border: rgb(71, 71, 71);
  --example-result-text: #a9a9a9;
}

// Example demo component shared styles
.example-container {
  display: block;
  max-width: 600px;
  margin: 0 auto;
  padding: 24px;
}

.example-result {
  margin-top: 24px;
  padding: 16px;
  background: var(--example-result-bg);
  border: 1px solid var(--example-result-border);
  border-radius: 0.375rem;

  h4 {
    margin-top: 0;
    margin-bottom: 12px;
    color: var(--example-result-text);
  }

  pre {
    margin: 0;
    white-space: pre-wrap;
    word-wrap: break-word;
    color: var(--example-result-text);
  }
}
