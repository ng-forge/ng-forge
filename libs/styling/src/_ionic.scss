@use 'tokens' as *;
@use 'themes' as *;

// ============================================
// IONIC EMBER THEME
// ============================================
// Maps ember design tokens to Ionic CSS variables

// ============================================
// PRIMARY COLOR MIXIN
// ============================================
// Sets Ionic primary color to ember palette
@mixin ionic-primary-colors {
  --ion-color-primary: #{$ember-core};
  --ion-color-primary-rgb: 255, 77, 0;
  --ion-color-primary-contrast: #ffffff;
  --ion-color-primary-contrast-rgb: 255, 255, 255;
  --ion-color-primary-shade: #e04500;
  --ion-color-primary-tint: #{$ember-hot};
}

// ============================================
// SECONDARY COLOR MIXIN
// ============================================
@mixin ionic-secondary-colors {
  --ion-color-secondary: #{$ember-glow};
  --ion-color-secondary-rgb: 255, 140, 66;
  --ion-color-secondary-contrast: #000000;
  --ion-color-secondary-contrast-rgb: 0, 0, 0;
  --ion-color-secondary-shade: #{$ember-hot};
  --ion-color-secondary-tint: #{$molten};
}

// ============================================
// TERTIARY COLOR MIXIN
// ============================================
@mixin ionic-tertiary-colors {
  --ion-color-tertiary: #{$molten};
  --ion-color-tertiary-rgb: 255, 182, 39;
  --ion-color-tertiary-contrast: #000000;
  --ion-color-tertiary-contrast-rgb: 0, 0, 0;
  --ion-color-tertiary-shade: #e0a023;
  --ion-color-tertiary-tint: #ffc347;
}

// ============================================
// SEMANTIC COLORS MIXIN
// ============================================
@mixin ionic-semantic-colors {
  // Success
  --ion-color-success: #{$success};
  --ion-color-success-rgb: 40, 202, 66;
  --ion-color-success-contrast: #ffffff;
  --ion-color-success-contrast-rgb: 255, 255, 255;
  --ion-color-success-shade: #23b23a;
  --ion-color-success-tint: #3ecf55;

  // Warning
  --ion-color-warning: #{$warning};
  --ion-color-warning-rgb: 255, 189, 46;
  --ion-color-warning-contrast: #000000;
  --ion-color-warning-contrast-rgb: 0, 0, 0;
  --ion-color-warning-shade: #e0a628;
  --ion-color-warning-tint: #ffc443;

  // Danger
  --ion-color-danger: #{$error};
  --ion-color-danger-rgb: 255, 95, 87;
  --ion-color-danger-contrast: #ffffff;
  --ion-color-danger-contrast-rgb: 255, 255, 255;
  --ion-color-danger-shade: #e0544d;
  --ion-color-danger-tint: #ff6f68;
}

// ============================================
// LIGHT THEME MIXIN
// ============================================
@mixin ionic-theme-light {
  @include apply-theme($theme-light);
  @include ionic-primary-colors;
  @include ionic-secondary-colors;
  @include ionic-tertiary-colors;
  @include ionic-semantic-colors;

  // Background colors (matches example body light)
  --ion-background-color: rgb(250, 250, 250);
  --ion-background-color-rgb: 250, 250, 250;

  // Text colors
  --ion-text-color: rgb(78, 78, 78);
  --ion-text-color-rgb: 78, 78, 78;

  // Component backgrounds (white for contrast against light gray page)
  --ion-item-background: #ffffff;
  --ion-card-background: #ffffff;
  --ion-toolbar-background: #ffffff;
  --ion-input-background: #ffffff;

  // Border color for inputs
  --ion-border-color: #dee2e6;

  // Step colors for gradients/states
  --ion-color-step-50: #f0f0f0;
  --ion-color-step-100: #e6e6e6;
  --ion-color-step-150: #d9d9d9;
  --ion-color-step-200: #cccccc;
  --ion-color-step-250: #bfbfbf;
  --ion-color-step-300: #b3b3b3;
  --ion-color-step-350: #a6a6a6;
  --ion-color-step-400: #999999;
  --ion-color-step-450: #8c8c8c;
  --ion-color-step-500: #808080;
  --ion-color-step-550: #737373;
  --ion-color-step-600: #666666;
  --ion-color-step-650: #595959;
  --ion-color-step-700: #4d4d4d;
  --ion-color-step-750: #404040;
  --ion-color-step-800: #333333;
  --ion-color-step-850: #262626;
  --ion-color-step-900: #191919;
  --ion-color-step-950: #0d0d0d;
}

// ============================================
// DARK THEME MIXIN
// ============================================
@mixin ionic-theme-dark {
  @include apply-theme($theme-dark);
  @include ionic-primary-colors;
  @include ionic-secondary-colors;
  @include ionic-tertiary-colors;
  @include ionic-semantic-colors;

  // Override primary for dark mode (use brighter variant)
  --ion-color-primary: #{$ember-glow};
  --ion-color-primary-rgb: 255, 140, 66;
  --ion-color-primary-shade: #{$ember-core};
  --ion-color-primary-tint: #{$molten};

  // Background colors (matches example body dark)
  --ion-background-color: rgb(19, 18, 16);
  --ion-background-color-rgb: 19, 18, 16;

  // Text colors
  --ion-text-color: #dee2e6;
  --ion-text-color-rgb: 222, 226, 230;

  // Component backgrounds (black for consistency with page)
  --ion-item-background: #000000;
  --ion-card-background: #000000;
  --ion-toolbar-background: rgb(19, 18, 16);
  --ion-input-background: #000000;

  // Border color for inputs (Bootstrap-like)
  --ion-border-color: rgb(73, 80, 87);

  // Step colors for gradients/states (dark)
  --ion-color-step-50: rgb(28, 28, 28);
  --ion-color-step-100: rgb(38, 38, 38);
  --ion-color-step-150: rgb(48, 48, 48);
  --ion-color-step-200: rgb(58, 58, 58);
  --ion-color-step-250: rgb(68, 68, 68);
  --ion-color-step-300: rgb(78, 78, 78);
  --ion-color-step-350: rgb(88, 88, 88);
  --ion-color-step-400: rgb(98, 98, 98);
  --ion-color-step-450: rgb(108, 108, 108);
  --ion-color-step-500: rgb(118, 118, 118);
  --ion-color-step-550: rgb(128, 128, 128);
  --ion-color-step-600: rgb(138, 138, 138);
  --ion-color-step-650: rgb(148, 148, 148);
  --ion-color-step-700: rgb(158, 158, 158);
  --ion-color-step-750: rgb(168, 168, 168);
  --ion-color-step-800: rgb(178, 178, 178);
  --ion-color-step-850: rgb(188, 188, 188);
  --ion-color-step-900: rgb(198, 198, 198);
  --ion-color-step-950: rgb(208, 208, 208);
}

// ============================================
// LANDING PAGE THEME MIXIN
// ============================================
// Dark variant with landing page background
@mixin ionic-theme-landing {
  @include ionic-theme-dark;

  // Override with landing page colors
  --bg-void: #{$bg-deep};
  --ion-background-color: #{$bg-deep};
  --ion-background-color-rgb: 10, 9, 8;
  --ion-item-background: #000000;
  --ion-card-background: #000000;
  --ion-toolbar-background: #{$bg-deep};
}

// ============================================
// LIGHT MODE INPUT STYLING
// ============================================
@mixin ionic-light-inputs {
  ion-select {
    color: #000000;
  }

  ion-select::part(text),
  ion-select::part(placeholder) {
    color: #000000;
  }
}

// ============================================
// INPUT COMPONENT MIXIN
// ============================================
// Applies styling to Ionic input components for dark mode
@mixin ionic-dark-inputs {
  ion-input,
  ion-textarea {
    --background: #000000;
    --color: #dee2e6;
    --placeholder-color: rgb(108, 117, 125);
    --border-color: rgb(73, 80, 87);
  }

  ion-select {
    --background: #000000;
    --placeholder-color: rgb(108, 117, 125);
    --border-color: rgb(73, 80, 87);
    color: #ffffff;
  }

  // Select value text should be white
  ion-select::part(text),
  ion-select::part(placeholder) {
    color: #ffffff;
  }

  ion-item {
    --background: #000000;
    --color: #dee2e6;
    --border-color: rgb(73, 80, 87);
    --padding-start: 1rem;
    --padding-end: 1rem;
    --inner-padding-start: 0.5rem;
    --inner-padding-end: 0.5rem;
  }

  // Alert dialog (used by select) styling
  ion-alert {
    --background: #000000;

    .alert-wrapper {
      background: #000000 !important;
    }

    .alert-head {
      background: rgb(10, 9, 8) !important;
    }

    .alert-message,
    .alert-radio-group,
    .alert-checkbox-group {
      background: #000000 !important;
    }

    .alert-button-group {
      background: #000000 !important;
    }

    // Radio and checkbox options
    .alert-radio-label,
    .alert-checkbox-label {
      color: #dee2e6 !important;
    }

    [aria-checked='true'].alert-radio-button .alert-radio-label,
    [aria-checked='true'].alert-checkbox-button .alert-checkbox-label {
      color: $ember-glow !important;
    }
  }
}

// ============================================
// IFRAME EMBEDDING FIXES
// ============================================
// Override Ionic's fixed positioning for iframe embedding
@mixin ionic-iframe-fixes {
  ion-app {
    position: relative !important;
    height: auto !important;
    min-height: 100%;
  }

  ion-router-outlet {
    position: relative !important;
    height: auto !important;
    display: block !important;
    contain: none !important;

    .ion-page,
    .ion-page.ion-page-invisible,
    .ion-page.ion-page-hidden {
      position: relative !important;
      height: auto !important;
      min-height: auto !important;
      contain: none !important;
      display: block !important;
    }
  }

  .ion-page.ion-page,
  ion-router-outlet > .ion-page {
    position: relative !important;
    height: auto !important;
    min-height: auto !important;
    contain: none !important;
    display: block !important;
  }

  ion-content {
    position: relative !important;
    height: auto !important;
    contain: none !important;
    --padding-start: 24px;
    --padding-end: 24px;
    --padding-top: 24px;
    --padding-bottom: 24px;

    &::part(scroll) {
      position: relative !important;
      overflow: visible !important;
    }
  }
}
