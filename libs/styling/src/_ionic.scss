@use 'tokens' as *;
@use 'themes' as *;

// ============================================
// IONIC EMBER THEME
// ============================================
// Maps ember design tokens to Ionic CSS variables

// ============================================
// PRIMARY COLOR MIXIN
// ============================================
// Sets Ionic primary color to ember palette
@mixin ionic-primary-colors {
  --ion-color-primary: #{$ember-core};
  --ion-color-primary-rgb: 255, 77, 0;
  --ion-color-primary-contrast: #ffffff;
  --ion-color-primary-contrast-rgb: 255, 255, 255;
  --ion-color-primary-shade: #e04500;
  --ion-color-primary-tint: #{$ember-hot};
}

// ============================================
// SECONDARY COLOR MIXIN
// ============================================
@mixin ionic-secondary-colors {
  --ion-color-secondary: #{$ember-glow};
  --ion-color-secondary-rgb: 255, 140, 66;
  --ion-color-secondary-contrast: #000000;
  --ion-color-secondary-contrast-rgb: 0, 0, 0;
  --ion-color-secondary-shade: #{$ember-hot};
  --ion-color-secondary-tint: #{$molten};
}

// ============================================
// TERTIARY COLOR MIXIN
// ============================================
@mixin ionic-tertiary-colors {
  --ion-color-tertiary: #{$molten};
  --ion-color-tertiary-rgb: 255, 182, 39;
  --ion-color-tertiary-contrast: #000000;
  --ion-color-tertiary-contrast-rgb: 0, 0, 0;
  --ion-color-tertiary-shade: #e0a023;
  --ion-color-tertiary-tint: #ffc347;
}

// ============================================
// SEMANTIC COLORS MIXIN
// ============================================
@mixin ionic-semantic-colors {
  // Success
  --ion-color-success: #{$success};
  --ion-color-success-rgb: 40, 202, 66;
  --ion-color-success-contrast: #ffffff;
  --ion-color-success-contrast-rgb: 255, 255, 255;
  --ion-color-success-shade: #23b23a;
  --ion-color-success-tint: #3ecf55;

  // Warning
  --ion-color-warning: #{$warning};
  --ion-color-warning-rgb: 255, 189, 46;
  --ion-color-warning-contrast: #000000;
  --ion-color-warning-contrast-rgb: 0, 0, 0;
  --ion-color-warning-shade: #e0a628;
  --ion-color-warning-tint: #ffc443;

  // Danger
  --ion-color-danger: #{$error};
  --ion-color-danger-rgb: 255, 95, 87;
  --ion-color-danger-contrast: #ffffff;
  --ion-color-danger-contrast-rgb: 255, 255, 255;
  --ion-color-danger-shade: #e0544d;
  --ion-color-danger-tint: #ff6f68;
}

// ============================================
// LIGHT THEME MIXIN
// ============================================
@mixin ionic-theme-light {
  @include apply-theme($theme-light);
  @include ionic-primary-colors;
  @include ionic-secondary-colors;
  @include ionic-tertiary-colors;
  @include ionic-semantic-colors;

  // Background colors
  --ion-background-color: #f6f6f6;
  --ion-background-color-rgb: 246, 246, 246;

  // Text colors
  --ion-text-color: rgb(78, 78, 78);
  --ion-text-color-rgb: 78, 78, 78;

  // Component backgrounds
  --ion-item-background: #ffffff;
  --ion-card-background: #ffffff;
  --ion-toolbar-background: #ffffff;
  --ion-input-background: #ffffff;

  // Step colors for gradients/states
  --ion-color-step-50: #f0f0f0;
  --ion-color-step-100: #e6e6e6;
  --ion-color-step-150: #d9d9d9;
  --ion-color-step-200: #cccccc;
  --ion-color-step-250: #bfbfbf;
  --ion-color-step-300: #b3b3b3;
  --ion-color-step-350: #a6a6a6;
  --ion-color-step-400: #999999;
  --ion-color-step-450: #8c8c8c;
  --ion-color-step-500: #808080;
  --ion-color-step-550: #737373;
  --ion-color-step-600: #666666;
  --ion-color-step-650: #595959;
  --ion-color-step-700: #4d4d4d;
  --ion-color-step-750: #404040;
  --ion-color-step-800: #333333;
  --ion-color-step-850: #262626;
  --ion-color-step-900: #191919;
  --ion-color-step-950: #0d0d0d;
}

// ============================================
// DARK THEME MIXIN
// ============================================
@mixin ionic-theme-dark {
  @include apply-theme($theme-dark);
  @include ionic-primary-colors;
  @include ionic-secondary-colors;
  @include ionic-tertiary-colors;
  @include ionic-semantic-colors;

  // Override primary for dark mode (use brighter variant)
  --ion-color-primary: #{$ember-glow};
  --ion-color-primary-rgb: 255, 140, 66;
  --ion-color-primary-shade: #{$ember-core};
  --ion-color-primary-tint: #{$molten};

  // Background colors (ng-doc dark mode)
  --ion-background-color: rgb(41, 41, 41);
  --ion-background-color-rgb: 41, 41, 41;

  // Text colors
  --ion-text-color: #a9a9a9;
  --ion-text-color-rgb: 169, 169, 169;

  // Component backgrounds
  --ion-item-background: rgb(55, 55, 55);
  --ion-card-background: rgb(55, 55, 55);
  --ion-toolbar-background: rgb(41, 41, 41);
  --ion-input-background: rgb(55, 55, 55);

  // Step colors for gradients/states (dark)
  --ion-color-step-50: rgb(50, 50, 50);
  --ion-color-step-100: rgb(60, 60, 60);
  --ion-color-step-150: rgb(70, 70, 70);
  --ion-color-step-200: rgb(80, 80, 80);
  --ion-color-step-250: rgb(90, 90, 90);
  --ion-color-step-300: rgb(100, 100, 100);
  --ion-color-step-350: rgb(110, 110, 110);
  --ion-color-step-400: rgb(120, 120, 120);
  --ion-color-step-450: rgb(130, 130, 130);
  --ion-color-step-500: rgb(140, 140, 140);
  --ion-color-step-550: rgb(150, 150, 150);
  --ion-color-step-600: rgb(160, 160, 160);
  --ion-color-step-650: rgb(170, 170, 170);
  --ion-color-step-700: rgb(180, 180, 180);
  --ion-color-step-750: rgb(190, 190, 190);
  --ion-color-step-800: rgb(200, 200, 200);
  --ion-color-step-850: rgb(210, 210, 210);
  --ion-color-step-900: rgb(220, 220, 220);
  --ion-color-step-950: rgb(230, 230, 230);
}

// ============================================
// LANDING PAGE THEME MIXIN
// ============================================
// Dark variant with landing page background
@mixin ionic-theme-landing {
  @include ionic-theme-dark;

  // Override with landing page colors
  --bg-void: #{$bg-deep};
  --ion-background-color: #{$bg-deep};
  --ion-background-color-rgb: 10, 9, 8;
  --ion-item-background: #{$bg-surface};
  --ion-card-background: #{$bg-surface};
  --ion-toolbar-background: #{$bg-deep};
}

// ============================================
// INPUT COMPONENT MIXIN
// ============================================
// Applies styling to Ionic input components for dark mode
@mixin ionic-dark-inputs {
  ion-input,
  ion-textarea,
  ion-select {
    --background: rgb(55, 55, 55);
    --color: #a9a9a9;
    --placeholder-color: rgb(140, 140, 140);
  }

  ion-item {
    --background: rgb(55, 55, 55);
    --color: #a9a9a9;
    --border-color: rgb(71, 71, 71);
  }
}

// ============================================
// IFRAME EMBEDDING FIXES
// ============================================
// Override Ionic's fixed positioning for iframe embedding
@mixin ionic-iframe-fixes {
  ion-app {
    position: relative !important;
    height: auto !important;
    min-height: 100%;
  }

  ion-router-outlet {
    position: relative !important;
    height: auto !important;
    display: block !important;
    contain: none !important;

    .ion-page,
    .ion-page.ion-page-invisible,
    .ion-page.ion-page-hidden {
      position: relative !important;
      height: auto !important;
      min-height: auto !important;
      contain: none !important;
      display: block !important;
    }
  }

  .ion-page.ion-page,
  ion-router-outlet > .ion-page {
    position: relative !important;
    height: auto !important;
    min-height: auto !important;
    contain: none !important;
    display: block !important;
  }

  ion-content {
    position: relative !important;
    height: auto !important;
    contain: none !important;
    --padding-start: 24px;
    --padding-end: 24px;
    --padding-top: 24px;
    --padding-bottom: 24px;

    &::part(scroll) {
      position: relative !important;
      overflow: visible !important;
    }
  }
}
