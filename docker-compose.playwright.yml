services:
  playwright:
    build:
      context: .
      dockerfile: Dockerfile.playwright
      args:
        PLAYWRIGHT_VERSION: ${PLAYWRIGHT_VERSION:-1.57.0}
    working_dir: /app
    volumes:
      - .:/app
      - /app/node_modules
      - playwright-cache:/root/.cache/ms-playwright
    environment:
      - CI=true
      - E2E_BROWSERS=${E2E_BROWSERS:-chromium}
    network_mode: host
    command: ['bash', '-c', "${PLAYWRIGHT_CMD:-echo 'No command specified'}"]

volumes:
  playwright-cache:
